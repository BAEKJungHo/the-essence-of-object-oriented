# 협력하는 객체들의 공동체

실제 애플리케이션을 개발하다보면 객체에 직접적으로 대응되는 실세계의 사물을 발견할 확률은 낮다. 그런 객체가 존재한다 하더라도 유사성을 찾기 어렵다.

객체지향의 목표는 실세계를 모방하는 것이 아니라, 고객과 사용자를 만족시킬 수 있는 신세계를 창조하는 것이다.

실세계의 모방이라는 개념이 비현실적이지만, 실세계에 대한 비유가 객체지향의 다양한 측면을 이해하고 학습하는 데 매우 효과적이다.

즉, `실세계의 모방이라는 객체지향 개념은 프로그램을 설계하고 구현하는 실무적인 관점에서는 부적합하지만, 객체지향이라는 용어가 담긴 기본 사상을 이해하고 학습하는 데는 매우 효과적이다.`

## 역할(Role), 책임(Responsibility), 협력(Collaboration)

- ex) 카페에서의 커피 주문을 생각해보자.
  - 손님 : 커피 주문, 커피 수령
  - 캐시어(주문 받는 사람) : 주문을 받아서 결제하고, 음료가 나오면 진동벨을 울린다.
  - 바리스타 : 캐시어로부터 받은 요청에 따라 커피를 만든다.
  
손님, 캐시어, 바리스타는 `역할(Interface)`이다. 역할은 프로그래밍 측면에서 Interface 라고 이해하면되는데, 손님, 캐시어, 바리스타는 배우든, 일반인이든, 개그맨이든 누구든 상관없다.
예를 들어 손님=배우 중 1명, 캐시어=일반인 중 1명, 바리스타=개그맨 중 1명 이라고 할 때 캐시어가 배우로 바뀐다고해서 손님과 바리스타에게 영향을 미쳐서는 안된다.
이런 특징을 객체지향에서 `다형성(Pholymorphism)` 이라 부른다. 다형성의 가장 큰 특징 중 하나는 클라이언트에 영향을 주지 않고 구현체를 실행시점에서 바꿀 수 있다는 것이다.
 
`책임`에 대해 설명하면, 손님의 책임은 커피 주문, 커피 수령, 캐시어는 결제 및 진동벨 울리기, 바리스타는 커피 제조가 되겠다.
 
`협력`은 커피 주문이라는 행위를 의미한다.
 
정리하자면 커피 주문이라는 협력에 참여하는 모든 사람들은 서로 맡은 바 `역할`과 `책임`을 다하고 있는 것이다.
 
- ex) 웹 프로그램 개발
  - 기획자 : 기획 및 화면 설계
  - 디자이너 : 화면 디자인
  - 퍼블리셔 : 화면 디자인을 마크업
  - 개발자 : 프로그램 개발
 
우리는 개발자이니 개발자스럽게 예를 들면 기획자, 디자이너, 개발자는 `역할`을 의미하고 `책임`은 기획자는 기획 및 화면 설계, 디자이너는 화면 디자인, 퍼블리셔는 화면 디자인을 마크업, 개발자는 프로그램 개발이 되며 `협력`은 웹 프로그램 개발이다.
 
기획자가 바뀐다고해서 개발자에게 영향을 미치면 안되며, 개발자가 바뀐다고해서 디자이너에게 영향을 미치면 안된다.

## 요청과 응답으로 이루어진 협력

협력은 요청과 응답으로 이루어지는데 `요청=클라이언트(Client), 응답=서버(Server)` 라고 생각하면 된다. 클라이언트는 또한 서버가 될 수 있다.

> 기획자 <-> 디자이너 <-> 퍼블리셔 <-> 개발자 <-> 기획자

위 관계에서 디자이너한테 기획자는 클라이언트이며, 디자이너는 서버이다. 반면 퍼블리셔한테 디자이너는 클라이언트이며, 퍼블리셔는 서버이다. 이렇게 서로 협력 관계에서 요청하는 입장에 있는 대상이
클라이언트가 되며, 응답하는 입장에 있는 대상이 서버가 된다.

개발자가 추가적으로 화면이 필요하다고 느껴서 퍼블리셔에게 마크업된 파일을 요청하면 퍼블리셔는 디자이너로 부터 화면 디자인을 요청한다. 이렇게 `요청과 응답은 연쇄적`으로 전달된다. 

## 역할과 책임 그리고 구현

사람들은 다른 사람과 협력하는 과정 속에서 `역할(Role)`을 부여받는다. 역할은 기획자, 디자이너, 퍼블리셔, 개발자이며 역할은 `책임을 암시`한다. 개발자의 역할은 프로그램 개발, 기획자는 고객 요청을 기획 등 각각의 역할을 통해서 책임도 유추할 수 있다.

구현은 역할을 수행하는 사람을 의미한다. 프로그래밍 측면에서는 구현(Implementation)을 인터페이스의 구현체라고 생각하면 된다.

이러한 특정한 역할을 부여받고 적합한 책임을 수행하는 과정에서 몇가지 중요한 개념을 제시한다.

### 여러 사람이 동일한 역할을 수행할 수 있다.

퍼블리셔가 A 이든 , B 이든, C 이든 개발자 입장에서 크게 중요하지 않다. 퍼블리셔가 그만둔다면 다른 사람을 고용하면된다. 개발자 입장에서는 마크업된 View 파일을 받기만 하면 된다.

### 역할은 대체 가능성을 의미한다.

개발자 입장에서 퍼블리셔는 `대체 가능(Substituable)` 하다. 두 명이 동일한 역할만 수행할 수 있다면, 누가 하든 상관없다.

### 책임을 수행하는 방법은 자율적으로 선택할 수 있다.

요청을 받은 사람은 요청을 처리하는 방법을 자유롭게할 수 있다. 개발자가 퍼블리셔에게 마크업된 파일을 요청하면 퍼블리셔는 자신만의 방법과 노하우로 디자이너로부터 디자인 화면을 받아서 마크업해서
개발자에게 전달한다. 퍼블리셔가 누구냐에 따라 일하는 방식(요청을 처리하는 방식)이 다르지만 역할은 동일하다. 즉, `동일한 요청에 대해서 역할을 수행하는 사람들마다(구현체) 서로 다른 방식으로 응답할 수 있는 능력`을 `다형성(Polymorphism)` 이라고 한다.

> 사람을 `객체`로, 요청을 `메시지`로 요청을 처리하는 방법을 `메서드`로 생각하면 된다.

### 한 사람이 동시에 여러 역할을 수행할 수 있다.

예를들어 개발자의 역할을 수행하고 있는 A 씨는 퍼블리셔 경험 1년, 디자이너 경험 1년이 있다고하면, A 씨는 퍼블리셔와 디자이너의 역할 또한 수행 할 수 있을 것이다.

> 객체지향 설계라는 예술은 적절한 객체에게 적절한 책임을 할당하는 것에서 시작된다. 책임은 객체지향 설계의 품질을 결정하는 가장 중요한 요소다. 책임이 불분명한 객체는 애플리케이션의 미래 역시
불분명하게 만든다. 역할은 유연하고 재사용 가능한 협력 관계를 구축하는 데 중요한 설계 요소다.

## 메시지(Message)

객체지향에서는 객체들이 의사소통하는 것을 `메시지(Message)`라고 한다. 한 객체가 다른 객체에게 요청하는 것을 메시지 전송이라고 하고 받는 것을 메시지 수신이라고 한다.

메시지 수신을 처리하는 방법을 `메서드(Method)`라고 한다.

객체는 `상태(state)` 와 `행위(behavior)` 로 이루어져 있다.

## 정리

객체지향의 핵심은 클래스가 아니다. 핵심은 적절한 책임을 수행하는 역할 간의 유연하고 견고한 협력 관계를 구축하는 것이다. 클래스는 협력에 참여하는 객체를 만드는 데 필요한 구현 매커니즘일 뿐이다.
